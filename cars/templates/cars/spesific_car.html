{% extends 'base.html' %}


{% block pageBasedStyle %}
{% load staticfiles %}
<link rel="stylesheet" href="{% static "packages/lightbox/css/lightbox.css" %}"/>
<link rel="stylesheet" href="{% static "cars/css/spesific_carStyle.css" %}"/>
{% endblock pageBasedStyle %}





{% block Content %}






<div class="container">

    <div class="row">
        <div class="col-md-4">
            <a href="{{ car.main_image }}" id="{{ car.id }}" data-lightbox="image-{{ car.id }}" data-title="{{ car.brand }} {{ car.model }}">
                <img src="{{ car.main_image }}" class="img-rounded" alt="{{ car.brand }} {{ car.model }}" width="304" height="236">
            </a>


            {% for image in bilder %}
                <a href="{{ image }}" id="{{ car.id }}" data-lightbox="image-{{ car.id }}" data-title="{{ car.brand }} {{ car.model }}">
                <img src="{{ image }}" class="img-rounded" alt="{{ car.brand }} {{ car.model }}" width="101" height="78">

                </a>
            {% endfor %}
        </div>
        <div class="col-md-8">
            <h1>{{ car.brand }} {{ car.model }}</h1>
             <p>{{ car.transmission }} <br>{{ car.fuel_type }}<br> Antall Seter: {{ car.seats }} <br> {% if car.year %} År: {{ car.year }} {% endif %}
                {% if car.extra_accessories %}
                    Tilbehør: {{ car.extra_accessories }}
                {% endif %}
                </p>
                <p><b>Pris:</b> {{ car.price }}</p>
        </div>
    </div>


    <div class="row">
        <div class="col-md-offset-1 col-md-4">
            <h3> Reservasjon </h3>
            <form method="post" >{% csrf_token %}

                <div class="input-group" style="width: 250px;">
                  <span class="input-group-addon" id="label_addon_initial_date" style="width: 80px;">Hentes</span>
                  <input type="text" class="form-control" id="datepickerStart" name="initial_date" aria-describedby="label_addon_initial_date">
                </div>
                <div class="input-group" style="width: 250px;">
                  <span class="input-group-addon" id="label_addon_final_date" style="width: 80px;">Leveres</span>
                  <input type="text" class="form-control" id="datepickerFinish" name="final_date" aria-describedby="label_addon_final_date" >
                </div>


                <button type="submit" class="btn btn-default">Fortsett</button>

                {% if errors %}
                {{ errors }}
                {% endif %}
            </form>
        </div>
        <div class="col-md-offset-1 col-md-4 col-xs-12">
            <h3> Ledighet </h3>
            <div id='calendar' style="background-color: white; color: black; "></div>
        </div>

    </div>

</div>







<div class="container">
{% if warning %}
<div class="alert alert-danger" style="font-size: large">
  <strong> {{ message }} </strong>
</div>
{% endif %}
</div>


<div id='calendar' style="background-color: white; color: black; width: 50%; height: 50%;"></div>


{% endblock Content %}




{% block testBlock %}
    <script src="{% static "packages/lightbox/js/lightbox.js" %}"></script>
   <script>
   //var event1 = {{ event|safe }}
   var json_data_string = {{ json_data_string | safe }}
   var events = []; //The array
   for(var i = 0; i<json_data_string.length; i++){
       console.log(i);
       events.push( {start: json_data_string[i].start, end: json_data_string[i].end, rendering: 'background', color: 'red'})
   }

    $(document).ready(( function() {
        $( "#datepickerStart" ).datepicker({minDate: 0});
        $( "#datepickerFinish" ).datepicker({minDate: 0});


        $('#calendar').fullCalendar({
            // put your options and callbacks here
        dayRender: function (date, cell) {
            cell.css("background-color", "white");
            },


                }
            )


        $("#calendar").fullCalendar('removeEvents');
        $("#calendar").fullCalendar('addEventSource', events);
    }

    ));


    </script>

{% endblock testBlock %}
