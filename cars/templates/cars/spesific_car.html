{% extends 'base.html' %}


{% block pageBasedStyle %}
{% load staticfiles %}
<link rel="stylesheet" href="{% static "packages/lightbox/css/lightbox.css" %}"/>
<link rel="stylesheet" href="{% static "cars/css/spesific_carStyle.css" %}"/>
{% endblock pageBasedStyle %}





{% block Content %}
<div class="container" id="car_container">
    <div class="row">
        <div class="col-md-offset-1 col-md-4">
            <a href="{{ car.main_image }}" id="{{ car.id }}" data-lightbox="image-{{ car.id }}" data-title="{{ car.brand }} {{ car.model }}">
                <img src="{{ car.main_image }}" class="img-rounded" alt="{{ car.brand }} {{ car.model }}" width="330" height="246">
            <!-- Main Image End -->
            </a>


            <!-- If the car contains multiple images -->
            {% if images %}
            <div id="gallery_images_container">
            {% for image in images %}
            <a href="{{ image }}" id="{{ car.id }}" data-lightbox="image-{{ car.id }}" data-title="{{ car.brand }} {{ car.model }}" class="gallery_images">
                <img src="{{ image }}" class="img-rounded " alt="{{ car.brand }} {{ car.model }}" width="101" height="78">
            </a>
            {% endfor %}
            </div>
            {% endif %}
        <!-- Image column end -->
        </div>

        <div class="col-md-offset-1 col-md-6">
            <h1> <b>{{ car.brand }} {{ car.model }}</b></h1>
            <div>
                <p>Girkasse: {{ car.transmission }} <br>Drivstoff: {{ car.fuel_type }}<br> Antall Seter: {{ car.seats }} <br> {% if car.year %} År: {{ car.year }} {% endif %}
                    {% if car.extra_accessories %}
                        Tilbehør: {{ car.extra_accessories }}
                    {% endif %}
                    </p>
                <p id="price_p"><b>Pris per dag:</b> {{ car.price }}</p>
            </div>
        <!-- Info column End -->
        </div>
    <!-- Row End -->
    </div>


    <div class="row">
        <div class="col-md-12" id="reservation_box">
        <div class="col-md-5" >
            <h1><b>Legg til en ny reservasjon</b></h1>
            <form method="post" >{% csrf_token %}
                    <div class="col-md-6 col-sm-6 col-xs-12 ">
                        <label for="datepickerStart" class="control-label date-label">Hentes</label>
                        <input type="text" value='' class="form-control datefield" id="datepickerStart" name="initial_date">
                    </div>
                    <div class="col-md-6 col-sm-6 col-xs-12 ">
                        <label for="name" class="control-label date-label">Leveres</label>
                        <input type="text" value='' class="form-control datefield" id="datepickerFinish" name="final_date">
                    </div>

            <div class="col-md-offset-6 col-md-7" id="button_box">
                <button type="submit" class="btn btn-primary btn-lg">Gå Videre</button>
            </div>


                {% if errors %}
                {{ errors }}
                {% endif %}

            </form>
            <div class="col-md-12">
                {% if warning %}
                <div class="alert alert-danger" style="font-size: large">
                  <strong> {{ message }} </strong>
                </div>
                {% endif %}

            </div>
        <!-- Reservation End -->
        </div>

        <div class="col-md-offset-1 col-md-6" id="calendar_box">
            <h1>Tilgjengelighet</h1>
            <div>
                <div id='calendar' style="background-color: white; color: black; width: 70%; height: 70%;"></div>
            </div>
        </div>
    </div>
    <!-- Row End -->
    </div>
<!-- Container End -->
</div>
{% endblock Content %}




{% block testBlock %}
    <script src="{% static "packages/lightbox/js/lightbox.js" %}"></script>
   <script>
   //var event1 = {{ event|safe }}
   var json_data_string = {{ json_data_string | safe }}
   var events = []; //The array
   for(var i = 0; i<json_data_string.length; i++){
       console.log(i);
       events.push( {start: json_data_string[i].start, end: json_data_string[i].end, rendering: 'background', color: 'red'})
   }

    $(document).ready(( function() {
        $( "#datepickerStart" ).datepicker({minDate: 0});
        $( "#datepickerFinish" ).datepicker({minDate: 0});


        $('#calendar').fullCalendar({
            // put your options and callbacks here
        dayRender: function (date, cell) {
            cell.css("background-color", "white");
            },


                }
            )


        $("#calendar").fullCalendar('removeEvents');
        $("#calendar").fullCalendar('addEventSource', events);
    }

    ));


    </script>

{% endblock testBlock %}
